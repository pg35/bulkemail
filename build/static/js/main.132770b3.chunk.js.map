{"version":3,"sources":["spinner.gif","components/Highlight.js","components/withRequest.js","components/Quota.js","components/JsonRequest.js","util.js","components/SavedEmailHandler.js","components/HomePage.js","components/Field.js","components/MySelect.js","components/Composer.js","components/Previewer.js","components/Progress.js","components/Sender.js","components/Navigation.js","components/App.js","index.js"],"names":["module","exports","Highlight","props","Array","isArray","v","map","x","i","react_default","a","createElement","key","length","_fetch","fetch","_x","_x2","_x3","_x4","_x5","apply","this","arguments","toString","url","method","headers","payload","config","body","then","response","status","msg","data","error","Error","throwError","statusText","Quota","className","colSpan","style","textAlign","limit","used","nextRenewal","buildQueryString","params","keys","Object","encodeURIComponent","join","JsonRequest","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","fetching","_this2","_this$props","baseUrl","resource","onSuccess","onError","onComplete","onValidateResponse","options","Content-Type","JSON","stringify","setState","console","info","log","json","errMsg","catch","mounted","finally","_this3","display","alignItems","justifyContent","progressMessage","src","alt","message","name","detail","components_Highlight","concat","canRetry","onClick","onRetry","React","Component","defaultProps","err","window","ajaxurl","plural","c","p","s","resources","resumer","pass","hasLastEmail","noLastEmail","quota","app","hasSavedEmail","noSavedEmail","delSavedEmail","progress","sender","previewer","code500","custom","SavedEmailHandler","deletingSavedEmail","_this$props$savedEmai","savedEmail","postcodes","sentCount","customerCount","remaining","filter","o","value","marginTop","renderDeleteRequest","react_router_dom","to","e","confirm","preventDefault","marginLeft","nonce","clientId","components_JsonRequest","action","obj","onSavedEmailDelete","element","renderSavedEmailInfo","HomePage","id","components_Quota","components_SavedEmailHandler","Field","isValid","invalidMsg","children","MySelect","allowSelectAll","react_select_browser_esm","assign","allOption","toConsumableArray","onChange","selected","event","result","includes","option","label","Option","chunk_ca26b926_browser_esm","type","checked","isSelected","ValueContainer","_ref","objectWithoutProperties","toBeRendered","getValue","some","val","MultiValue","labelToBeDisplayed","animatedComponents","makeAnimated","Composer","subject","allPostcodes","readOnly","dirty","validation","onPostcodeChange","touched","optionsData","postcode","components_Field","padding","components_MySelect","isMulti","closeMenuOnSelect","hideSelectedOptions","components","placeholder","rows","Previewer","email","onPreviewGenerate","renderGenerateRequest","_props$email","_props$progress","_props$quota","isNewEmail","remainingCustomers","remainingQuota","feedback","border","dangerouslySetInnerHTML","__html","replace","renderPreview","Progress","onSentCountChange","stop","setTimeout","delay","renderFetchRequest","Sender","sending","fetchProgress","_this$props$email","strPostcodes","isnew","_this$state","_this$props2","_this$props2$progress","onRestart","renderSendRequest","components_Progress","Navigation","prevPath","prevLabel","onPrev","nextPath","nextLabel","onNext","noop","App","handleSavedEmailDelete","buildEmailObj","buildProgressObj","handleEmailDraftChange","_objectSpread3","_e$target","target","_objectSpread","defineProperty","handlePostcodeChange","selectedOptionsData","handleSentCountChange","newCount","handlerPreviewGenerate","handleRestart","prevState","initCount","split","Date","now","emailValidation","reduce","String","trim","isInvalidEmail","react_router","initialEntries","path","exact","render","components_HomePage","components_Composer","components_Navigation","components_Previewer","components_Sender","renderInitRequest","rootElement","document","getElementById","ReactDOM","components_App"],"mappings":"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","file":"static/js/main.132770b3.chunk.js","sourcesContent":["module.exports = \"data:image/gif;base64,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\"","import React from \"react\";\r\n\r\nfunction Highlight(props) {\r\n  const item = Array.isArray(props.v) ? (\r\n    props.v.map((x, i) => (\r\n      <span key={i}>\r\n        <strong>{x}</strong>\r\n        {props.v.length - 1 !== i ? \", \" : \"\"}\r\n      </span>\r\n    ))\r\n  ) : (\r\n    <strong>{props.v}</strong>\r\n  );\r\n  return item;\r\n}\r\n\r\nexport default Highlight;\r\n","import React from \"react\";\r\nimport spinnerPath from \"../spinner.gif\";\r\nimport Highlight from \"./Highlight\";\r\n\r\nexport function buildQueryString(params) {\r\n  if (!params) return \"\";\r\n  const keys = Object.keys(params);\r\n  return keys.length\r\n    ? \"?\" +\r\n        keys\r\n          .map(\r\n            key =>\r\n              encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key])\r\n          )\r\n          .join(\"&\")\r\n    : \"\";\r\n}\r\n\r\nexport function throwError(msg, data) {\r\n  var error = new Error(msg);\r\n  error.data = data;\r\n  throw error;\r\n}\r\n\r\nexport function error2Msg(error) {\r\n  let detail = error.message;\r\n  if (!detail && error.response) {\r\n    detail = error.response.status + \" \" + error.response.statusText;\r\n  }\r\n  return detail;\r\n}\r\n\r\nexport function RequestProgress(props) {\r\n  return (\r\n    <div>\r\n      {props.message} {\"...\"} <img src={spinnerPath} alt=\"loader gif\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function RequestError(props) {\r\n  const { error, showRetry, onRetry } = props;\r\n  return (\r\n    <div>\r\n      <Highlight v={error2Msg(error)} />{\" \"}\r\n      {showRetry && <button onClick={e => onRetry()}>Retry</button>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const requestConfig = {\r\n  baseUrl: \"\",\r\n  method: \"GET\",\r\n  defaultHeaders: {\r\n    \"Content-Type\": \"application/json\"\r\n  },\r\n  progressMessage: \"Fetching\",\r\n  getUrl: (props, config) => config.baseUrl,\r\n  getPayload: (props, config) => {},\r\n  getHeaders: (props, config) => config.defaultHeaders,\r\n  formatPayload: (payload, method, config) =>\r\n    \"GET\" === method ? buildQueryString(payload) : JSON.stringify(payload),\r\n  fetch: (url, method, headers, payload, config) => {\r\n    const promise =\r\n      \"GET\" === method\r\n        ? fetch(url + payload)\r\n        : fetch(url, {\r\n            method,\r\n            headers,\r\n            body: payload\r\n          });\r\n    return promise.then(response => {\r\n      if (response.status >= 200 && response.status < 300) {\r\n        return response;\r\n      } else {\r\n        throwError(response.statusText, response);\r\n      }\r\n    });\r\n  },\r\n  onSuccess: (response, props, config) => console.log(\"onSuccess\", response),\r\n  onError: (error, props, config) => console.log(\"error\", error)\r\n};\r\n\r\nconst withRequest = (config = requestConfig) => Component => {\r\n  return class extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        fetching: false,\r\n        error: null,\r\n        response: null\r\n      };\r\n    }\r\n\r\n    handleRetry = () => this.fetch();\r\n    fetch() {\r\n      const url = config.getUrl(this.props, config);\r\n      const payload = config.formatPayload(\r\n        config.getPayload(this.props, config)\r\n      );\r\n      const headers = config.getHeaders(this.props, config);\r\n      this.setState({ fetching: true, error: null });\r\n      console.info(url, payload, config);\r\n      const promise = config.fetch(\r\n        url,\r\n        config.method,\r\n        headers,\r\n        payload,\r\n        config\r\n      );\r\n      promise\r\n        .then(response => {\r\n          config.onSuccess(response, this.props, config);\r\n          this.setState({ response });\r\n        })\r\n        .catch(error => {\r\n          config.onError(error, this.props);\r\n          this.setState({ error });\r\n        })\r\n        .finally(() => {\r\n          this.setState({ fetching: false });\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n      this.fetch();\r\n    }\r\n\r\n    render() {\r\n      if (this.state.fetching) {\r\n        return <RequestProgress message={config.progressMessage} />;\r\n      }\r\n      if (this.state.error) {\r\n        const { error } = this.state;\r\n        return (\r\n          <RequestError\r\n            error={error}\r\n            onRetry={this.handleRetry}\r\n            showRetry={true}\r\n          />\r\n        );\r\n      }\r\n      return <Component {...this.props} data={this.state.response} />;\r\n    }\r\n  };\r\n};\r\n\r\nexport default withRequest;\r\n","import React from \"react\";\r\n\r\nfunction Quota(props) {\r\n  return (\r\n    <div className=\"mesblkml-quota\">\r\n      <table>\r\n        <tbody>\r\n          <tr>\r\n            <th colSpan=\"2\" style={{ textAlign: \"center\" }}>\r\n              Quota\r\n            </th>\r\n          </tr>\r\n          <tr>\r\n            <th>Limit</th>\r\n            <td>{props.limit}</td>\r\n          </tr>\r\n          <tr>\r\n            <th>Remaining</th>\r\n            <td>{props.limit - props.used}</td>\r\n          </tr>\r\n          <tr>\r\n            <th>Next Renewal</th>\r\n            <td>{props.nextRenewal}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Quota;\r\n","import React from \"react\";\r\nimport \"whatwg-fetch\";\r\nimport Highlight from \"./Highlight\";\r\n\r\nfunction buildQueryString(params) {\r\n  if (!params) return \"\";\r\n  const keys = Object.keys(params);\r\n  return keys.length\r\n    ? \"?\" +\r\n        keys\r\n          .map(\r\n            key =>\r\n              encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key])\r\n          )\r\n          .join(\"&\")\r\n    : \"\";\r\n}\r\nfunction throwError(msg, data) {\r\n  var error = new Error(msg);\r\n  error.data = data;\r\n  throw error;\r\n}\r\n\r\nclass JsonRequest extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      fetching: false,\r\n      error: null\r\n    };\r\n  }\r\n\r\n  fetch() {\r\n    const {\r\n      baseUrl,\r\n      resource,\r\n      method,\r\n      data,\r\n      onSuccess,\r\n      onError,\r\n      onComplete,\r\n      onValidateResponse\r\n    } = this.props;\r\n    const url = baseUrl + (resource ? \"/\" + resource : \"\");\r\n    const options = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(data)\r\n    };\r\n    this.setState({ fetching: true, error: null });\r\n    console.info(url, resource, method, data, url + buildQueryString(data));\r\n    const promise =\r\n      !method || \"GET\" === method\r\n        ? fetch(url + buildQueryString(data))\r\n        : fetch(url, options);\r\n    promise\r\n      .then(response => {\r\n        console.log(response);\r\n        if (response.status >= 200 && response.status < 300) {\r\n          return response.json();\r\n        } else {\r\n          throwError(response.statusText, response);\r\n        }\r\n      })\r\n      .then(json => {\r\n        if (onValidateResponse && !onValidateResponse(json)) {\r\n          throwError(json.errMsg ? json.errMsg : \"Invalid response\", json);\r\n        }\r\n        onSuccess && onSuccess(json);\r\n      })\r\n      .catch(error => {\r\n        if (this.mounted) {\r\n          this.setState({ error });\r\n          onError && onError(error);\r\n        } else\r\n          console.log(\"json request::catching error when unmounted\", error);\r\n      })\r\n      .finally(() => {\r\n        if (this.mounted) {\r\n          this.setState({ fetching: false });\r\n          onComplete && onComplete();\r\n        } else console.log(\"json request::completed when unmounted\");\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetch();\r\n    this.mounted = true;\r\n  }\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n  render() {\r\n    if (this.state.fetching) {\r\n      return (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\"\r\n          }}\r\n        >\r\n          {this.props.progressMessage} ...{\" \"}\r\n          <img src=\"https://i.ibb.co/7V89Rtr/spinner.gif\" alt=\"loader gif\" />\r\n        </div>\r\n      );\r\n    }\r\n    if (this.state.error) {\r\n      const { error } = this.state;\r\n      console.log(\"a\", error.message, error.name);\r\n      let detail = error.message;\r\n      if (!detail && error.response) {\r\n        detail = error.response.status + \" \" + error.response.statusText;\r\n      }\r\n      return (\r\n        <div>\r\n          <Highlight v={`Failed: ${this.props.progressMessage} `} />\r\n          {detail ? `(${detail}) ` : \" \"}\r\n          {this.props.canRetry && (\r\n            <button\r\n              onClick={() => {\r\n                this.fetch();\r\n                this.props.onRetry();\r\n              }}\r\n            >\r\n              Retry\r\n            </button>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n}\r\n//const ajaxurl = \"https://www.alfaoils.co.uk/wp-admin/admin-ajax.php\";\r\nJsonRequest.defaultProps = {\r\n  onValidateResponse: json => !json.err,\r\n  onRetry: () => {},\r\n  canRetry: true,\r\n  baseUrl: window.ajaxurl //\"https://www.mocky.io/v2\"\r\n  //data: { \"mocky-delay\": \"5000ms\" }\r\n};\r\nexport default JsonRequest;\r\n","export const plural = (c, p, s) => (c > 1 ? p : s);\r\n\r\n//baseurl https://www.mocky.io/v2/\r\nexport const resources = {\r\n  resumer: {\r\n    pass: {\r\n      hasLastEmail: \"5d87715c340000c8370a14f7\",\r\n      noLastEmail: \"5d87755434000021510a150e\"\r\n    }\r\n  },\r\n  quota: {\r\n    pass: \"5d857913320000410f07b267\"\r\n  },\r\n  app: {\r\n    /*{\"err\":0,\"savedEmail\":{\"clientId\":5894,\"postcodes\":[{\"value\":\"BT13\",\"label\":\"BT13\"},{\"value\":\"BT32\",\"label\":\"BT32\"},{\"value\":\"BT17\",\"label\":\"BT17\"}],\"subject\":\"first email\",\"message\":\"first emial body\",\"sentCount\":52,\"customerCount\":100},\"quota\":{\"limit\":100,\"used\":55,\"nextRenewal\":\"in 2 days\"}}*/\r\n    hasSavedEmail: \"\", //\"5d8d155b2e0000fbcfabdec9\",\r\n    noSavedEmail: \"5d87dc2034000094910a15c6\"\r\n  },\r\n  delSavedEmail: {\r\n    pass: \"\" //\"5d87dc2034000094910a15c6\" //same as nosavedemail b/c only {err:0} needed\r\n  },\r\n  progress: {\r\n    pass: \"\" //\"5d88d5113300003008d7dc0c\"\r\n  },\r\n  sender: {\r\n    pass: \"\" //\"5d8aa2493500005c00d46a0d\"\r\n  },\r\n  previewer: {\r\n    pass: \"\" //\"5d8e3f3c3100003e9f2b541e\"\r\n  },\r\n  error: {\r\n    code500: \"5d87ec3a3300006e00d7d704\",\r\n    custom: \"5d8bfa142e00005100abd65f\"\r\n  }\r\n};\r\n","import React from \"react\";\r\n\r\nimport Highlight from \"./Highlight\";\r\nimport { Link } from \"react-router-dom\";\r\nimport JsonRequest from \"./JsonRequest\";\r\nimport { resources, plural } from \"../util\";\r\n\r\nclass SavedEmailHandler extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      deletingSavedEmail: false\r\n    };\r\n  }\r\n\r\n  renderSavedEmailInfo() {\r\n    const { postcodes, sentCount, customerCount } = this.props.savedEmail;\r\n    const remaining = customerCount - sentCount;\r\n    return (\r\n      <div>\r\n        <div className=\"mes-para\">\r\n          Previously, email destined for{\" \"}\r\n          {plural(postcodes.length, \"postcodes\", \"postcode\") + \" \"}\r\n          <span>\r\n            <Highlight\r\n              v={postcodes.filter(o => \"*\" !== o.value).map(o => o.value)}\r\n            />\r\n          </span>{\" \"}\r\n          was sent to <Highlight v={sentCount} /> out of{\" \"}\r\n          <Highlight v={customerCount} />\r\n          {\" \" + plural(customerCount, \"customers\", \"customer\")}.\r\n          <br />\r\n          It was saved to be sent to the remaining <Highlight v={remaining} />\r\n          {\" \" + plural(customerCount, \"customers\", \"customer\")}.\r\n          <br />\r\n          Send it now or delete it.\r\n        </div>\r\n        <div style={{ marginTop: \"20px\" }}>\r\n          {this.state.deletingSavedEmail ? (\r\n            this.renderDeleteRequest()\r\n          ) : (\r\n            <div className=\"mes-stack\">\r\n              <Link\r\n                to=\"/\"\r\n                onClick={e => {\r\n                  if (\r\n                    window.confirm(\r\n                      `The saved email is still to be sent to ${remaining} ${plural(\r\n                        customerCount,\r\n                        \"customers\",\r\n                        \"customer\"\r\n                      )}.\\nAre you sure you want to delete it?`\r\n                    )\r\n                  ) {\r\n                    this.setState({\r\n                      deletingSavedEmail: true\r\n                    });\r\n                  } else {\r\n                    e.preventDefault();\r\n                  }\r\n                }}\r\n              >\r\n                Delete Saved Email\r\n              </Link>\r\n              <Link to=\"/preview\" style={{ marginLeft: \"20px\" }}>\r\n                Preview & Send Saved Email\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDeleteRequest() {\r\n    const { nonce, clientId } = this.props;\r\n    return (\r\n      <JsonRequest\r\n        data={{\r\n          action: \"mesbulkemailerdelete\",\r\n          nonce,\r\n          clientId\r\n        }}\r\n        method=\"POST\"\r\n        resource={resources.error.code500 && resources.delSavedEmail.pass}\r\n        progressMessage=\"Deleting saved email\"\r\n        onSuccess={obj => {\r\n          console.log(\"delete saved email::\", obj);\r\n          this.setState({\r\n            deletingSavedEmail: false\r\n          });\r\n          this.props.onSavedEmailDelete();\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  render() {\r\n    const element = this.props.savedEmail ? (\r\n      this.renderSavedEmailInfo()\r\n    ) : (\r\n      <Link to=\"/compose\">Compose Email</Link>\r\n    );\r\n    return <div>{element}</div>;\r\n  }\r\n}\r\nexport default SavedEmailHandler;\r\n","import React from \"react\";\r\n\r\nimport Quota from \"./Quota\";\r\nimport SavedEmailHandler from \"./SavedEmailHandler\";\r\n\r\nfunction HomePage(props) {\r\n  console.log(\"homepage \", props);\r\n  return (\r\n    <div id=\"mesblkml-home\">\r\n      <h2>Home</h2>\r\n      <p>\r\n        Send email to postcode to have it sent to all Woocommerce customers\r\n        having the same billing postcode\r\n      </p>\r\n      <Quota {...props.quota} />\r\n      <br />\r\n      <SavedEmailHandler {...props} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n","import React from \"react\";\r\n\r\nfunction Field(props) {\r\n  const { isValid, invalidMsg } = props;\r\n  return (\r\n    <div className={`mes-field ${isValid ? \"\" : \"mes-field--error\"}`}>\r\n      <div>{props.children}</div>\r\n      {isValid ? null : <div className=\"mes-error\">{invalidMsg}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nField.defaultProps = {\r\n  invalidMsg: \"required\"\r\n};\r\nexport default Field;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { default as ReactSelect } from \"react-select\";\r\nimport makeAnimated from \"react-select/animated\";\r\nimport { components } from \"react-select\";\r\n\r\nconst MySelect = props => {\r\n  if (props.allowSelectAll) {\r\n    return (\r\n      <ReactSelect\r\n        {...props}\r\n        options={[props.allOption, ...props.options]}\r\n        onChange={(selected, event) => {\r\n          if (selected !== null && selected.length > 0) {\r\n            if (selected[selected.length - 1].value === props.allOption.value) {\r\n              return props.onChange([props.allOption, ...props.options]);\r\n            }\r\n            let result = [];\r\n            if (selected.length === props.options.length) {\r\n              if (selected.includes(props.allOption)) {\r\n                result = selected.filter(\r\n                  option => option.value !== props.allOption.value\r\n                );\r\n              } else if (event.action === \"select-option\") {\r\n                result = [props.allOption, ...props.options];\r\n              }\r\n              return props.onChange(result);\r\n            }\r\n          }\r\n\r\n          return props.onChange(selected);\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return <ReactSelect {...props} />;\r\n};\r\n\r\nMySelect.propTypes = {\r\n  options: PropTypes.array,\r\n  value: PropTypes.any,\r\n  onChange: PropTypes.func,\r\n  allowSelectAll: PropTypes.bool,\r\n  allOption: PropTypes.shape({\r\n    label: PropTypes.string,\r\n    value: PropTypes.string\r\n  })\r\n};\r\n\r\nMySelect.defaultProps = {\r\n  allOption: {\r\n    label: \"Select all\",\r\n    value: \"*\"\r\n  }\r\n};\r\n\r\nexport const Option = props => {\r\n  return (\r\n    <div>\r\n      <components.Option {...props}>\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={props.isSelected}\r\n          onChange={() => null}\r\n        />{\" \"}\r\n        <label>{props.label}</label>\r\n      </components.Option>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst allOption = {\r\n  label: \"Select all\",\r\n  value: \"*\"\r\n};\r\n\r\nexport const ValueContainer = ({ children, ...props }) => {\r\n  const currentValues = props.getValue();\r\n  let toBeRendered = children;\r\n  if (currentValues.some(val => val.value === allOption.value)) {\r\n    toBeRendered = [[children[0][0]], children[1]];\r\n  }\r\n\r\n  return (\r\n    <components.ValueContainer {...props}>\r\n      {toBeRendered}\r\n    </components.ValueContainer>\r\n  );\r\n};\r\n\r\nexport const MultiValue = props => {\r\n  let labelToBeDisplayed = `${props.data.label}, `;\r\n  if (props.data.value === allOption.value) {\r\n    labelToBeDisplayed = \"All Postcodes\";\r\n  }\r\n  return (\r\n    <components.MultiValue {...props}>\r\n      <span>{labelToBeDisplayed}</span>\r\n    </components.MultiValue>\r\n  );\r\n};\r\n\r\nexport const animatedComponents = makeAnimated();\r\n\r\nexport default MySelect;\r\n","import React from \"react\";\r\nimport Field from \"./Field\";\r\nimport MySelect, {\r\n  Option,\r\n  MultiValue,\r\n  ValueContainer,\r\n  animatedComponents\r\n} from \"./MySelect.js\";\r\n\r\nfunction Composer(props) {\r\n  const {\r\n    postcodes,\r\n    subject,\r\n    message,\r\n    allPostcodes,\r\n    readOnly,\r\n    onChange,\r\n    dirty,\r\n    validation,\r\n    onPostcodeChange,\r\n    touched\r\n  } = props;\r\n\r\n  const optionsData = allPostcodes.map(postcode => ({\r\n    value: postcode,\r\n    label: postcode\r\n  }));\r\n\r\n  return (\r\n    <div className=\"mesblkml-composer\">\r\n      <Field isValid={dirty && touched.postcodes ? validation.postcodes : true}>\r\n        <div style={{ padding: \"2px 0\" }}>\r\n          <MySelect\r\n            className=\"mes-multiseclct\"\r\n            options={optionsData}\r\n            isMulti\r\n            closeMenuOnSelect={false}\r\n            hideSelectedOptions={false}\r\n            components={{\r\n              Option,\r\n              MultiValue,\r\n              ValueContainer,\r\n              animatedComponents\r\n            }}\r\n            onChange={onPostcodeChange}\r\n            allowSelectAll={true}\r\n            value={postcodes}\r\n            placeholder=\"Select Postcode(s)\"\r\n          />\r\n        </div>\r\n      </Field>\r\n      <Field isValid={dirty && touched.subject ? validation.subject : true}>\r\n        <input\r\n          type=\"text\"\r\n          value={subject}\r\n          onChange={onChange}\r\n          name=\"subject\"\r\n          readOnly={readOnly}\r\n          placeholder=\"Write Subject\"\r\n        />\r\n      </Field>\r\n      <Field isValid={dirty && touched.message ? validation.message : true}>\r\n        <textarea\r\n          value={message}\r\n          onChange={onChange}\r\n          name=\"message\"\r\n          readOnly={readOnly}\r\n          rows=\"10\"\r\n          placeholder=\"Write Message\"\r\n        />\r\n      </Field>\r\n      <Field isValid={true}>\r\n        *use [name] to insert customer billing name in the message e.g. Hi\r\n        [name], ....\r\n      </Field>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Composer;\r\n","import React from \"react\";\r\n\r\nimport Highlight from \"./Highlight\";\r\nimport JsonRequest from \"./JsonRequest\";\r\nimport { resources, plural } from \"../util\";\r\n\r\nfunction Previewer(props) {\r\n  const renderPreview = () => {\r\n    const {\r\n      email: { postcodes, subject, message },\r\n      progress: { sentCount, customerCount },\r\n      quota: { limit, used },\r\n      isNewEmail\r\n    } = props;\r\n    const remainingCustomers = customerCount - sentCount;\r\n    const remainingQuota = limit - used;\r\n    const feedback = !remainingQuota\r\n      ? \"Quota has already been consumed\"\r\n      : remainingCustomers > remainingQuota\r\n      ? `There is not enough quota remaining to send ${remainingCustomers} emails. Only ${remainingQuota} emails can be sent.`\r\n      : \"\";\r\n    return (\r\n      <div>\r\n        <div className=\"mes-row\">\r\n          <div className=\"mes-row__heading\">\r\n            {plural(postcodes.length, \"Postcodes\", \"Postcode\")}\r\n          </div>\r\n          <div className=\"mes-row__detail\">\r\n            <Highlight\r\n              v={postcodes.filter(o => \"*\" !== o.value).map(o => o.value)}\r\n            />{\" \"}\r\n            ({postcodes.length > 1 ? \"all \" : \"\"}having{\" \"}\r\n            {postcodes.length > 1 ? \"total \" : \"\"}\r\n            <Highlight v={customerCount} />{\" \"}\r\n            {plural(customerCount, \"customers\", \"customer\")})\r\n          </div>\r\n        </div>\r\n        <div className=\"mes-row\">\r\n          <div className=\"mes-row__heading\">Subject</div>\r\n          <div className=\"mes-row__detail\">{subject}</div>\r\n        </div>\r\n        <div className=\"mes-row\">\r\n          <div className=\"mes-row__heading\">Message</div>\r\n          <div\r\n            className=\"mes-row__detail\"\r\n            style={{ border: \"1px dotted #000\" }}\r\n            dangerouslySetInnerHTML={{\r\n              __html: (() => message.replace(/(?:\\r\\n|\\r|\\n)/g, \"<br/>\"))()\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"mes-row\">\r\n          <div className=\"mes-row__heading\">Total customers to serve</div>\r\n          <div className=\"mes-row__detail\">\r\n            {customerCount}{\" \"}\r\n            <small>(emails will need to be sent for selected postcodes)</small>\r\n          </div>\r\n        </div>\r\n        {!isNewEmail && (\r\n          <div className=\"mes-row\">\r\n            <div className=\"mes-row__heading\">Customers already served</div>\r\n            <div className=\"mes-row__detail\">\r\n              {sentCount} <small>(emails have already been sent)</small>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {!isNewEmail && (\r\n          <div className=\"mes-row\">\r\n            <div className=\"mes-row__heading\">\r\n              Customers remaining to be served\r\n            </div>\r\n            <div className=\"mes-row__detail\">\r\n              {remainingCustomers}{\" \"}\r\n              <small>(emails are remaining to be sent)</small>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div className=\"mes-row\">\r\n          <div className=\"mes-row__heading\">Qutoa</div>\r\n          <div className=\"mes-row__detail\">{limit}</div>\r\n        </div>\r\n        <div className=\"mes-row\">\r\n          <div className=\"mes-row__heading\">Remaining Qutoa</div>\r\n          <div className=\"mes-row__detail\">{remainingQuota}</div>\r\n        </div>\r\n\r\n        <div className=\"mes-row\" style={{ marginTop: \"2em\" }}>\r\n          <small>\r\n            <strong>Processing Info:</strong>\r\n            <br />\r\n            - Emails will be sent until all emails are sent, qutoa rans out or\r\n            some unexpected error occurs.\r\n            <br />\r\n            - If quota is renewed during the processing, it will be consumed.\r\n            <br />\r\n            - If not all emails are sent, data will be saved to resume the\r\n            processing later to send remaining emails.\r\n            <br />\r\n          </small>\r\n        </div>\r\n        {feedback && (\r\n          <div className=\"mes-row mes-blkml-preview__feedback\">{feedback}</div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderGenerateRequest = () => {\r\n    const postcodes = props.email.postcodes\r\n      .filter(o => \"*\" !== o.value)\r\n      .map(o => o.value)\r\n      .join(\",\");\r\n    return (\r\n      <JsonRequest\r\n        data={{ action: \"mesbulkemailerpreview\", postcodes }}\r\n        resource={resources.error.code500 && resources.previewer.pass}\r\n        progressMessage=\"Generating preview\"\r\n        onSuccess={obj => {\r\n          console.log(\"preview::\", obj);\r\n          props.onPreviewGenerate(obj);\r\n        }}\r\n      />\r\n    );\r\n  };\r\n\r\n  const element = props.email.dirty ? (\r\n    <div className=\"mes-hvcenter\">{renderGenerateRequest()}</div>\r\n  ) : (\r\n    renderPreview()\r\n  );\r\n  return <div>{element}</div>;\r\n}\r\nexport default Previewer;\r\n","import React from \"react\";\r\n\r\nimport JsonRequest from \"./JsonRequest\";\r\nimport { resources } from \"../util\";\r\n\r\nclass Progress extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      fetching: true\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  renderFetchRequest() {\r\n    return (\r\n      <JsonRequest\r\n        data={{ action: \"mesbulkemailerprogress\" }}\r\n        resource={resources.error.code500 && resources.progress.pass}\r\n        progressMessage=\"Fetching progress\"\r\n        onSuccess={obj => {\r\n          console.log(this.props);\r\n          this.mounted && this.props.onSentCountChange(obj.sentCount);\r\n        }}\r\n        onComplete={() => {\r\n          this.mounted && this.setState({ fetching: false });\r\n          if (!this.props.stop) {\r\n            setTimeout(\r\n              () => this.mounted && this.setState({ fetching: true }),\r\n              this.props.delay || 2000\r\n            );\r\n          }\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { stop, sentCount, customerCount } = this.props;\r\n    return (\r\n      <div className=\"mesblkml-progress\">\r\n        <div className=\"mesblkml-progress__stats\">\r\n          <span>{sentCount}</span> / <span>{customerCount}</span>{\" \"}\r\n          <span>emails sent</span>\r\n        </div>\r\n        <div className=\"mesblkml-progress__status\">\r\n          {!stop && this.state.fetching ? (\r\n            this.renderFetchRequest()\r\n          ) : (\r\n            <div>&nbsp;</div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Progress;\r\n","import React from \"react\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\nimport JsonRequest from \"./JsonRequest\";\r\nimport Progress from \"./Progress\";\r\n\r\nimport { resources } from \"../util\";\r\n\r\nclass Sender extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      sending: true,\r\n      fetchProgress: true,\r\n      message: \"\",\r\n      sentCount: 0,\r\n      customerCount: 0\r\n    };\r\n  }\r\n\r\n  renderSendRequest() {\r\n    const {\r\n      email: { postcodes, subject, message },\r\n      progress: { clientId },\r\n      isNewEmail,\r\n      nonce\r\n    } = this.props;\r\n    const strPostcodes = postcodes\r\n      .filter(o => \"*\" !== o.value)\r\n      .map(o => o.value)\r\n      .join(\",\");\r\n    return (\r\n      <JsonRequest\r\n        data={{\r\n          action: \"mesbulkemailersend\",\r\n          nonce,\r\n          postcodes: strPostcodes,\r\n          subject,\r\n          message,\r\n          clientId,\r\n          isnew: isNewEmail ? \"yes\" : \"no\"\r\n        }}\r\n        method=\"POST\"\r\n        canRetry={false}\r\n        resource={resources.error.code500 && resources.sender.pass}\r\n        progressMessage=\"Processing\"\r\n        onSuccess={obj =>\r\n          this.setState({\r\n            sending: false,\r\n            message: obj.msg,\r\n            sentCount: obj.sentCount,\r\n            customerCount: obj.customerCount\r\n          })\r\n        }\r\n        onError={err => this.setState({ fetchProgress: false })}\r\n        onRetry={() => this.setState({ fetchProgress: true })}\r\n      />\r\n    );\r\n  }\r\n  render() {\r\n    const { sending, fetchProgress, message } = this.state;\r\n    const {\r\n      progress: { sentCount, customerCount },\r\n      onRestart,\r\n      onSentCountChange\r\n    } = this.props;\r\n    const element = sending ? (\r\n      <div>\r\n        <div className=\"mesblkml-sender__status\">\r\n          {this.renderSendRequest()}\r\n        </div>\r\n        <Progress\r\n          sentCount={sentCount}\r\n          customerCount={customerCount}\r\n          stop={!fetchProgress}\r\n          onSentCountChange={onSentCountChange}\r\n        />\r\n        {!fetchProgress && (\r\n          <div className=\"mesblkml-retart\">\r\n            <Link\r\n              to=\"/\"\r\n              onClick={() => {\r\n                onRestart();\r\n              }}\r\n            >\r\n              Home\r\n            </Link>\r\n          </div>\r\n        )}\r\n      </div>\r\n    ) : (\r\n      <div>\r\n        <Progress\r\n          stop={true}\r\n          sentCount={this.state.sentCount}\r\n          customerCount={this.state.customerCount}\r\n          onSentCountChange={() => {}}\r\n        />\r\n        <div className=\"mesblkml-result\">\r\n          <div>Completed</div>\r\n          <div>{message}</div>\r\n        </div>\r\n        <div className=\"mesblkml-retart\">\r\n          <Link\r\n            to=\"/\"\r\n            onClick={() => {\r\n              onRestart();\r\n            }}\r\n          >\r\n            Home\r\n          </Link>\r\n        </div>\r\n        <div />\r\n      </div>\r\n    );\r\n    return <div className=\"mesblkml-sender\">{element}</div>;\r\n  }\r\n}\r\nexport default Sender;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Navigation(props) {\r\n  const { prevPath, prevLabel, onPrev, nextPath, nextLabel, onNext } = props;\r\n  const noop = () => {};\r\n  return (\r\n    <div className=\"mesblkml-navigation\">\r\n      {prevPath ? (\r\n        <Link to={prevPath} onClick={onPrev ? onPrev : noop}>\r\n          {prevLabel ? prevLabel : \"Previous\"}\r\n        </Link>\r\n      ) : null}\r\n      {nextPath ? (\r\n        <Link to={nextPath} onClick={onNext ? onNext : noop}>\r\n          {nextLabel ? nextLabel : \"Next\"}\r\n        </Link>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Navigation;\r\n","import React from \"react\";\r\nimport { MemoryRouter as Router } from \"react-router\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\n\r\nimport HomePage from \"./HomePage\";\r\nimport Composer from \"./Composer\";\r\nimport Previewer from \"./Previewer\";\r\nimport Sender from \"./Sender\";\r\nimport Navigation from \"./Navigation\";\r\nimport JsonRequest from \"./JsonRequest\";\r\nimport Highlight from \"./Highlight\";\r\n\r\nimport { resources, plural } from \"../util\";\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      initCount: 0,\r\n      isNewEmail: true,\r\n      email: {\r\n        postcodes: null,\r\n        subject: \"\",\r\n        message: \"\",\r\n        dirty: false,\r\n        touched: {}\r\n      },\r\n      progress: {\r\n        sentCount: 0,\r\n        customerCount: 0,\r\n        clientId: \"\"\r\n      },\r\n      quota: {\r\n        limit: 0,\r\n        used: 0,\r\n        nextRenewal: \"\"\r\n      },\r\n      nonce: \"\"\r\n    };\r\n  }\r\n\r\n  buildEmailObj(obj) {\r\n    let postcodes = (obj && obj.postcodes) || null;\r\n    if (postcodes)\r\n      postcodes = postcodes.split(\",\").map(x => ({ label: x, value: x }));\r\n    console.log(\"fetched postcd\", postcodes);\r\n    return {\r\n      postcodes,\r\n      subject: (obj && obj.subject) || \"\",\r\n      message: (obj && obj.message) || \"\",\r\n      dirty: !!obj,\r\n      touched: {}\r\n    };\r\n  }\r\n\r\n  buildProgressObj(obj) {\r\n    return {\r\n      sentCount: (obj && obj.sentCount) || 0,\r\n      customerCount: (obj && obj.customerCount) || 0,\r\n      clientId: (obj && obj.clientId) || Date.now()\r\n    };\r\n  }\r\n\r\n  handleSavedEmailDelete = () => {\r\n    this.setState({\r\n      isNewEmail: true,\r\n      email: this.buildEmailObj(null),\r\n      progress: this.buildProgressObj(null)\r\n    });\r\n  };\r\n\r\n  handleEmailDraftChange = e => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      email: {\r\n        ...this.state.email,\r\n        [name]: value,\r\n        dirty: true,\r\n        touched: { ...this.state.email.touched, [name]: 1 }\r\n      }\r\n    });\r\n  };\r\n\r\n  handlePostcodeChange = selectedOptionsData => {\r\n    this.setState({\r\n      email: {\r\n        ...this.state.email,\r\n        postcodes: selectedOptionsData,\r\n        dirty: true,\r\n        touched: { ...this.state.email.touched, postcodes: 1 }\r\n      }\r\n    });\r\n  };\r\n\r\n  handleSentCountChange = newCount => {\r\n    this.setState({\r\n      progress: { ...this.state.progress, sentCount: newCount }\r\n    });\r\n  };\r\n\r\n  handlerPreviewGenerate = data => {\r\n    const obj = {\r\n      email: { ...this.state.email, dirty: false }\r\n    };\r\n    if (this.state.isNewEmail) {\r\n      obj[\"progress\"] = {\r\n        ...this.state.progress,\r\n        customerCount: data.customerCount\r\n      };\r\n    }\r\n    this.setState(obj);\r\n  };\r\n\r\n  handleRestart = () =>\r\n    this.setState(prevState => ({ initCount: prevState.initCount + 1 }));\r\n\r\n  renderInitRequest() {\r\n    return (\r\n      <JsonRequest\r\n        data={{ action: \"mesbulkemailerinit\" }}\r\n        resource={resources.error.custom && resources.app.hasSavedEmail}\r\n        progressMessage={\r\n          !this.state.initCount ? \"Initializing App\" : \"Fetching status\"\r\n        }\r\n        onSuccess={obj => {\r\n          console.log(\"app::\", obj);\r\n          this.setState(prevState => ({\r\n            initCount: prevState.initCount + 1,\r\n            isNewEmail: !obj.savedEmail,\r\n            email: this.buildEmailObj(obj.savedEmail),\r\n            progress: this.buildProgressObj(obj.savedEmail),\r\n            quota: obj.quota,\r\n            nonce: obj.nonce\r\n          }));\r\n        }}\r\n        onComplete={() => \"app oncomplete called\"}\r\n      />\r\n    );\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    console.log(\"app: unmounting\");\r\n  }\r\n\r\n  render() {\r\n    console.log(\"app state\", this.state);\r\n    const { initCount, isNewEmail, email, progress, quota, nonce } = this.state;\r\n    const emailValidation = Object.keys(email)\r\n      .filter(p => \"dirty\" !== p && \"touched\" !== p)\r\n      .reduce(\r\n        (o, p) => ({\r\n          ...o,\r\n          [p]:\r\n            email[p] &&\r\n            (Array.isArray(email[p])\r\n              ? !!email[p].length\r\n              : !!String(email[p]).trim())\r\n        }),\r\n        {}\r\n      );\r\n    const isInvalidEmail = Object.keys(emailValidation).filter(\r\n      p => !emailValidation[p]\r\n    ).length;\r\n    console.log(emailValidation, isInvalidEmail);\r\n    return !(initCount % 2) ? (\r\n      <div className=\"mes-hvcenter\">{this.renderInitRequest()}</div>\r\n    ) : (\r\n      <Router initialEntries={[\"/\", \"/compose\", \"/preview\"]}>\r\n        <Switch>\r\n          <Route\r\n            path=\"/\"\r\n            exact\r\n            render={() => (\r\n              <HomePage\r\n                quota={quota}\r\n                savedEmail={isNewEmail ? null : { ...email, ...progress }}\r\n                nonce={nonce}\r\n                clientId={progress.clientId}\r\n                onSavedEmailDelete={this.handleSavedEmailDelete}\r\n              />\r\n            )}\r\n          />\r\n          <Route\r\n            path=\"/compose\"\r\n            exact\r\n            render={() => (\r\n              <div id=\"mesblkml-compose\">\r\n                <h2>Compose Email</h2>\r\n                <Composer\r\n                  {...this.state.email}\r\n                  allPostcodes={this.props.allPostcodes}\r\n                  onChange={this.handleEmailDraftChange}\r\n                  validation={emailValidation}\r\n                  onPostcodeChange={this.handlePostcodeChange}\r\n                />\r\n                <Navigation\r\n                  prevPath=\"/\"\r\n                  prevLabel=\"Home\"\r\n                  nextPath=\"/preview\"\r\n                  nextLabel=\"Preview\"\r\n                  onNext={e => {\r\n                    const dirty = this.state.email.dirty;\r\n                    this.setState({\r\n                      email: {\r\n                        ...this.state.email,\r\n                        dirty: true,\r\n                        touched: { postcodes: 1, subject: 1, message: 1 }\r\n                      }\r\n                    });\r\n                    if (isInvalidEmail) e.preventDefault();\r\n                    else {\r\n                      this.setState({\r\n                        email: { ...this.state.email, dirty, touched: {} }\r\n                      });\r\n                    }\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n          />\r\n          <Route\r\n            path=\"/preview\"\r\n            exact\r\n            render={() => (\r\n              <div id=\"mesblkml-preview\">\r\n                <h2>Preview Email</h2>\r\n                <Previewer\r\n                  {...this.state}\r\n                  onPreviewGenerate={this.handlerPreviewGenerate}\r\n                />\r\n                <Navigation\r\n                  prevPath={isNewEmail ? \"/compose\" : \"/\"}\r\n                  prevLabel={isNewEmail ? \"Compose\" : \"Home\"}\r\n                  nextPath=\"/process\"\r\n                  nextLabel=\"Confirm & Send\"\r\n                  onNext={e => {\r\n                    if (!window.confirm(`Are you sure to send this email?`))\r\n                      e.preventDefault();\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n          />\r\n          <Route\r\n            path=\"/process\"\r\n            exact\r\n            render={() => (\r\n              <div id=\"mesblkml-process\">\r\n                <h2>Sending Email</h2>\r\n                <p>\r\n                  <small>having</small> subject{\" \"}\r\n                  <Highlight v={this.state.email.subject} />\r\n                </p>\r\n                <p>\r\n                  <small>to</small>{\" \"}\r\n                  {plural(\r\n                    this.state.email.postcodes.length,\r\n                    \"postcodes\",\r\n                    \"postcode\"\r\n                  )}{\" \"}\r\n                  <Highlight\r\n                    v={this.state.email.postcodes\r\n                      .filter(o => \"*\" !== o.value)\r\n                      .map(o => o.value)}\r\n                  />\r\n                </p>\r\n                <Sender\r\n                  {...this.state}\r\n                  onSentCountChange={this.handleSentCountChange}\r\n                  onRestart={this.handleRestart}\r\n                />\r\n              </div>\r\n            )}\r\n          />\r\n        </Switch>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./styles.css\";\nimport spinnerGif from \"./spinner.gif\";\n\nimport withRequest, {\n  RequestProgress,\n  RequestError,\n  requestConfig\n} from \"./components/withRequest\";\nimport App from \"./components/App\";\nimport Quota from \"./components/Quota\";\nimport Composer from \"./components/Composer\";\nimport Navigation from \"./components/Navigation\";\nimport Progress from \"./components/Progress\";\nimport Sender from \"./components/Sender\";\nimport Field from \"./components/Field\";\nimport MySelect, {\n  Option,\n  MultiValue,\n  ValueContainer,\n  animatedComponents\n} from \"./components/MySelect.js\";\nimport Highlight from \"./components/Highlight\";\nconst colourOptions = [\n  { value: \"ocean1\", label: \"Ocean\", color: \"#00B8D9\" },\n  { value: \"blue\", label: \"Blue\", color: \"#0052CC\" },\n  { value: \"purple\", label: \"Purple\", color: \"#5243AA\" },\n  { value: \"red\", label: \"Red\", color: \"#FF5630\" },\n  { value: \"orange\", label: \"Orange\", color: \"#FF8B00\" },\n  { value: \"yellow\", label: \"Yellow\", color: \"#FFC400\" },\n  { value: \"green\", label: \"Green\", color: \"#36B37E\" },\n  { value: \"forest\", label: \"Forest\", color: \"#00875A\" },\n  { value: \"slate\", label: \"Slate\", color: \"#253858\" },\n  { value: \"silver\", label: \"Silver\", color: \"#666666\" }\n];\nconst delay = ms => cb => setTimeout(cb, ms);\nconst allPostcodes = [\n  \"BT1\",\n  \"BT2\",\n  \"BT3\",\n  \"BT4\",\n  \"BT5\",\n  \"BT6\",\n  \"BT7\",\n  \"BT8\",\n  \"BT9\",\n  \"BT10\",\n  \"BT11\",\n  \"BT12\",\n  \"BT13\",\n  \"BT14\",\n  \"BT15\",\n  \"BT16\",\n  \"BT17\",\n  \"BT18\",\n  \"BT19\",\n  \"BT20\",\n  \"BT21\",\n  \"BT22\",\n  \"BT23\",\n  \"BT24\",\n  \"BT25\",\n  \"BT26\",\n  \"BT27\",\n  \"BT28\",\n  \"BT32\",\n  \"BT36\",\n  \"BT37\",\n  \"BT38\",\n  \"BT61\",\n  \"BT62\",\n  \"BT63\",\n  \"BT64\",\n  \"BT65\",\n  \"BT66\",\n  \"BT67\"\n];\n\nclass Test extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: {\n        postcodes: null,\n        subject: \"abc\",\n        message: \"xad\",\n        dirty: false\n      },\n      stop: false,\n      sentCount: 34,\n      stopCount: 100,\n      selected: null\n    };\n  }\n  handleEmailDraftChange = e => {\n    const { name, value } = e.target;\n    console.log(name, value);\n    this.setState({\n      email: { ...this.state.email, [name]: value }\n    });\n  };\n\n  handlePostcodeChange = selected => {\n    console.log(selected);\n    this.setState({\n      email: { ...this.state.email, postcodes: selected }\n    });\n    return;\n    this.setState({\n      email: { ...this.state.email, postcodes: selected.map(x => x.value) }\n    });\n  };\n\n  render() {\n    const optionsData = allPostcodes.map(postcode => ({\n      value: postcode,\n      label: postcode\n    }));\n    const selectedOptionsData =\n      this.state.email.postcodes &&\n      this.state.email.postcodes.map(postcode => ({\n        value: postcode,\n        label: postcode\n      }));\n    return (\n      <div>\n        <MySelect\n          options={optionsData}\n          isMulti\n          closeMenuOnSelect={false}\n          hideSelectedOptions={false}\n          components={{\n            Option,\n            MultiValue,\n            ValueContainer,\n            animatedComponents\n          }}\n          onChange={this.handlePostcodeChange}\n          allowSelectAll={true}\n          value={this.state.email.postcodes}\n        />\n      </div>\n    );\n    return (\n      <div>\n        <Composer\n          {...this.state.email}\n          onChange={this.handleEmailDraftChange}\n          allPostcodes={allPostcodes}\n          onPostcodeChange={this.handlePostcodeChange}\n        />\n        <button\n          onClick={() =>\n            this.setState(p => {\n              return {\n                email: { ...p.email, dirty: !p.email.dirty }\n              };\n            })\n          }\n        >\n          {!this.state.email.dirty ? \"dirty\" : \"undirty\"}\n        </button>\n      </div>\n    );\n  }\n}\nfunction App2() {\n  return <App allPostcodes={allPostcodes} />;\n}\nconst rootElement = document.getElementById(\"mesblkml\");\nReactDOM.render(<App2 />, rootElement);\n"],"sourceRoot":""}