{"version":3,"sources":["components/Quota.js","components/Highlight.js","components/JsonRequest.js","util.js","components/SavedEmailHandler.js","components/HomePage.js","components/Field.js","components/MySelect.js","components/Composer.js","components/Previewer.js","components/Progress.js","components/Sender.js","components/Navigation.js","components/App.js","index.js"],"names":["Quota","props","react_default","a","createElement","className","colSpan","style","textAlign","limit","used","nextRenewal","Highlight","Array","isArray","v","map","x","i","key","length","buildQueryString","params","keys","Object","encodeURIComponent","join","throwError","msg","data","error","Error","JsonRequest","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","fetching","_this2","_this$props","baseUrl","resource","method","onSuccess","onError","onComplete","onValidateResponse","url","options","headers","Content-Type","body","JSON","stringify","setState","console","info","fetch","then","response","log","status","json","statusText","errMsg","catch","mounted","finally","_this3","display","alignItems","justifyContent","progressMessage","src","alt","message","name","detail","components_Highlight","concat","onClick","onRetry","React","Component","defaultProps","err","plural","c","p","s","resources","hasSavedEmail","noSavedEmail","pass","code500","custom","SavedEmailHandler","deletingSavedEmail","_this$props$savedEmai","savedEmail","postcodes","sentCount","customerCount","remaining","filter","o","value","marginTop","renderDeleteRequest","react_router_dom","to","e","window","confirm","preventDefault","marginLeft","components_JsonRequest","obj","onSavedEmailDelete","element","renderSavedEmailInfo","HomePage","id","components_Quota","quota","components_SavedEmailHandler","Field","isValid","invalidMsg","children","MySelect","allowSelectAll","react_select_browser_esm","assign","allOption","toConsumableArray","onChange","selected","event","result","includes","option","action","label","Option","chunk_ca26b926_browser_esm","type","checked","isSelected","ValueContainer","_ref","objectWithoutProperties","toBeRendered","getValue","some","val","MultiValue","labelToBeDisplayed","animatedComponents","makeAnimated","Composer","subject","allPostcodes","readOnly","dirty","validation","onPostcodeChange","touched","optionsData","postcode","components_Field","components_MySelect","isMulti","closeMenuOnSelect","hideSelectedOptions","components","placeholder","rows","Previewer","_this$props$email","email","_this$props$progress","progress","_this$props$quota","isNewEmail","remainingCustomers","remainingQuota","feedback","border","dangerouslySetInnerHTML","__html","replace","fontSize","color","fontWeight","onPreviewGenerate","renderGenerateRequest","renderPreview","Progress","clientId","onSentCountChange","stop","setTimeout","delay","renderFetchRequest","Sender","sending","fetchProgress","mocky-delay","_this$state","onRestart","renderSendRequest","components_Progress","Navigation","prevPath","prevLabel","onPrev","nextPath","nextLabel","onNext","noop","App","handleSavedEmailDelete","buildEmailObj","buildProgressObj","handleEmailDraftChange","_objectSpread3","_e$target","target","_objectSpread","defineProperty","handlePostcodeChange","selectedOptionsData","handleSentCountChange","newCount","handlerPreviewGenerate","handleRestart","prevState","initCount","emailValidation","reduce","String","trim","isInvalidEmail","react_router","initialEntries","path","exact","render","components_HomePage","components_Composer","components_Navigation","components_Previewer","components_Sender","renderInitRequest","rootElement","document","getElementById","ReactDOM","components_App"],"mappings":"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","file":"static/js/main.791857f7.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nfunction Quota(props) {\r\n  return (\r\n    <div className=\"mesblkml-quota\">\r\n      <table>\r\n        <tbody>\r\n          <tr>\r\n            <th colSpan=\"2\" style={{ textAlign: \"center\" }}>\r\n              Quota\r\n            </th>\r\n          </tr>\r\n          <tr>\r\n            <th>Limit</th>\r\n            <td>{props.limit}</td>\r\n          </tr>\r\n          <tr>\r\n            <th>Remaining</th>\r\n            <td>{props.limit - props.used}</td>\r\n          </tr>\r\n          <tr>\r\n            <th>Next Renewal</th>\r\n            <td>{props.nextRenewal}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Quota;\r\n","import React from \"react\";\r\n\r\nfunction Highlight(props) {\r\n  const item = Array.isArray(props.v) ? (\r\n    props.v.map((x, i) => (\r\n      <span key={i}>\r\n        <strong>{x}</strong>\r\n        {props.v.length - 1 !== i ? \", \" : \"\"}\r\n      </span>\r\n    ))\r\n  ) : (\r\n    <strong>{props.v}</strong>\r\n  );\r\n  return item;\r\n}\r\n\r\nexport default Highlight;\r\n","import React from \"react\";\r\nimport \"whatwg-fetch\";\r\nimport Highlight from \"./Highlight\";\r\n\r\nfunction buildQueryString(params) {\r\n  if (!params) return \"\";\r\n  const keys = Object.keys(params);\r\n  return keys.length\r\n    ? \"?\" +\r\n        keys\r\n          .map(\r\n            key =>\r\n              encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key])\r\n          )\r\n          .join(\"&\")\r\n    : \"\";\r\n}\r\nfunction throwError(msg, data) {\r\n  var error = new Error(msg);\r\n  error.data = data;\r\n  throw error;\r\n}\r\n\r\nclass JsonRequest extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      fetching: false,\r\n      error: null\r\n    };\r\n  }\r\n\r\n  fetch() {\r\n    const {\r\n      baseUrl,\r\n      resource,\r\n      method,\r\n      data,\r\n      onSuccess,\r\n      onError,\r\n      onComplete,\r\n      onValidateResponse\r\n    } = this.props;\r\n    const url = baseUrl + (resource ? \"/\" + resource : \"\");\r\n    const options = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(data)\r\n    };\r\n    this.setState({ fetching: true, error: null });\r\n    console.info(url, resource, method, data, url + buildQueryString(data));\r\n    const promise =\r\n      !method || \"GET\" === method\r\n        ? fetch(url + buildQueryString(data))\r\n        : fetch(url, options);\r\n    promise\r\n      .then(response => {\r\n        console.log(response);\r\n        if (response.status >= 200 && response.status < 300) {\r\n          return response.json();\r\n        } else {\r\n          throwError(response.statusText, response);\r\n        }\r\n      })\r\n      .then(json => {\r\n        if (onValidateResponse && !onValidateResponse(json)) {\r\n          throwError(json.errMsg ? json.errMsg : \"Invalid response\", json);\r\n        }\r\n        onSuccess && onSuccess(json);\r\n      })\r\n      .catch(error => {\r\n        if (this.mounted) {\r\n          this.setState({ error });\r\n          onError && onError(error);\r\n        } else\r\n          console.log(\"json request::catching error when unmounted\", error);\r\n      })\r\n      .finally(() => {\r\n        if (this.mounted) {\r\n          this.setState({ fetching: false });\r\n          onComplete && onComplete();\r\n        } else console.log(\"json request::completed when unmounted\");\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetch();\r\n    this.mounted = true;\r\n  }\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n  render() {\r\n    if (this.state.fetching) {\r\n      return (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\"\r\n          }}\r\n        >\r\n          {this.props.progressMessage} ...{\" \"}\r\n          <img src=\"https://i.ibb.co/7V89Rtr/spinner.gif\" alt=\"loader gif\" />\r\n        </div>\r\n      );\r\n    }\r\n    if (this.state.error) {\r\n      const { error } = this.state;\r\n      console.log(\"a\", error.message, error.name);\r\n      let detail = error.message;\r\n      if (!detail && error.response) {\r\n        detail = error.response.status + \" \" + error.response.statusText;\r\n      }\r\n      return (\r\n        <div>\r\n          <Highlight v={`Failed: ${this.props.progressMessage} `} />\r\n          {detail ? `(${detail}) ` : \" \"}\r\n          <button\r\n            onClick={() => {\r\n              this.fetch();\r\n              this.props.onRetry();\r\n            }}\r\n          >\r\n            Retry\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n}\r\nJsonRequest.defaultProps = {\r\n  onValidateResponse: json => !json.err,\r\n  baseUrl: \"https://www.mocky.io/v2\"\r\n  //data: { \"mocky-delay\": \"5000ms\" }\r\n};\r\nexport default JsonRequest;\r\n","export const plural = (c, p, s) => (c > 1 ? p : s);\r\n\r\n//baseurl https://www.mocky.io/v2/\r\nexport const resources = {\r\n  resumer: {\r\n    pass: {\r\n      hasLastEmail: \"5d87715c340000c8370a14f7\",\r\n      noLastEmail: \"5d87755434000021510a150e\"\r\n    }\r\n  },\r\n  quota: {\r\n    pass: \"5d857913320000410f07b267\"\r\n  },\r\n  app: {\r\n    /*{\"err\":0,\"savedEmail\":{\"clientId\":5894,\"postcodes\":[{\"value\":\"BT13\",\"label\":\"BT13\"},{\"value\":\"BT32\",\"label\":\"BT32\"},{\"value\":\"BT17\",\"label\":\"BT17\"}],\"subject\":\"first email\",\"message\":\"first emial body\",\"sentCount\":52,\"customerCount\":100},\"quota\":{\"limit\":100,\"used\":55,\"nextRenewal\":\"in 2 days\"}}*/\r\n    hasSavedEmail: \"5d8d155b2e0000fbcfabdec9\",\r\n    noSavedEmail: \"5d87dc2034000094910a15c6\"\r\n  },\r\n  delSavedEmail: {\r\n    pass: \"5d87dc2034000094910a15c6\" //same as nosavedemail b/c only {err:0} needed\r\n  },\r\n  progress: {\r\n    pass: \"5d88d5113300003008d7dc0c\"\r\n  },\r\n  sender: {\r\n    pass: \"5d8aa2493500005c00d46a0d\"\r\n  },\r\n  previewer: {\r\n    pass: \"5d8e3f3c3100003e9f2b541e\"\r\n  },\r\n  error: {\r\n    code500: \"5d87ec3a3300006e00d7d704\",\r\n    custom: \"5d8bfa142e00005100abd65f\"\r\n  }\r\n};\r\n","import React from \"react\";\r\n\r\nimport Highlight from \"./Highlight\";\r\nimport { Link } from \"react-router-dom\";\r\nimport JsonRequest from \"./JsonRequest\";\r\nimport { resources, plural } from \"../util\";\r\n\r\nclass SavedEmailHandler extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      deletingSavedEmail: false\r\n    };\r\n  }\r\n\r\n  renderSavedEmailInfo() {\r\n    const { postcodes, sentCount, customerCount } = this.props.savedEmail;\r\n    const remaining = customerCount - sentCount;\r\n    return (\r\n      <div>\r\n        <div>\r\n          Previously, email destined for{\" \"}\r\n          {plural(postcodes.length, \"postcodes\", \"postcode\") + \" \"}\r\n          <span>\r\n            <Highlight\r\n              v={postcodes.filter(o => \"*\" !== o.value).map(o => o.value)}\r\n            />\r\n          </span>{\" \"}\r\n          was sent to <Highlight v={sentCount} /> out of{\" \"}\r\n          <Highlight v={customerCount} />\r\n          {\" \" + plural(customerCount, \"customers\", \"customer\")}.\r\n          <br />\r\n          It was saved to be sent to the remaining <Highlight v={remaining} />\r\n          {\" \" + plural(customerCount, \"customers\", \"customer\")}.\r\n          <br />\r\n          Send it now or delete it.\r\n        </div>\r\n        <div style={{ marginTop: \"20px\" }}>\r\n          {this.state.deletingSavedEmail ? (\r\n            this.renderDeleteRequest()\r\n          ) : (\r\n            <div>\r\n              <Link\r\n                to=\"/\"\r\n                onClick={e => {\r\n                  if (\r\n                    window.confirm(\r\n                      `The saved email is still to be sent to ${remaining} ${plural(\r\n                        customerCount,\r\n                        \"customers\",\r\n                        \"customer\"\r\n                      )}.\\nAre you sure you want to delete it?`\r\n                    )\r\n                  ) {\r\n                    this.setState({\r\n                      deletingSavedEmail: true\r\n                    });\r\n                  } else {\r\n                    e.preventDefault();\r\n                  }\r\n                }}\r\n              >\r\n                Delete Saved Email\r\n              </Link>\r\n              <Link to=\"/preview\" style={{ marginLeft: \"20px\" }}>\r\n                Preview & Send Saved Email\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDeleteRequest() {\r\n    return (\r\n      <JsonRequest\r\n        resource={resources.error.code500 && resources.delSavedEmail.pass}\r\n        progressMessage=\"Deleting saved email\"\r\n        onSuccess={obj => {\r\n          console.log(\"delete saved email::\", obj);\r\n          this.setState({\r\n            deletingSavedEmail: false\r\n          });\r\n          this.props.onSavedEmailDelete();\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  render() {\r\n    const element = this.props.savedEmail ? (\r\n      this.renderSavedEmailInfo()\r\n    ) : (\r\n      <Link to=\"/compose\">Compose Email</Link>\r\n    );\r\n    return <div>{element}</div>;\r\n  }\r\n}\r\nexport default SavedEmailHandler;\r\n","import React from \"react\";\r\n\r\nimport Quota from \"./Quota\";\r\nimport SavedEmailHandler from \"./SavedEmailHandler\";\r\n\r\nfunction HomePage(props) {\r\n  console.log(\"homepage \", props);\r\n  return (\r\n    <div id=\"mesblkml-home\">\r\n      <h2>Home</h2>\r\n      <p>\r\n        Send email to postcode to have it sent to all Woocommerce customers\r\n        having the same billing postcode\r\n      </p>\r\n      <Quota {...props.quota} />\r\n      <br />\r\n      <SavedEmailHandler {...props} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n","import React from \"react\";\r\n\r\nfunction Field(props) {\r\n  const { isValid, invalidMsg } = props;\r\n  return (\r\n    <div className={`mes-field ${isValid ? \"\" : \"mes-field--error\"}`}>\r\n      <div>{props.children}</div>\r\n      {isValid ? null : <div className=\"mes-error\">{invalidMsg}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nField.defaultProps = {\r\n  invalidMsg: \"required\"\r\n};\r\nexport default Field;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { default as ReactSelect } from \"react-select\";\r\nimport makeAnimated from \"react-select/animated\";\r\nimport { components } from \"react-select\";\r\n\r\nconst MySelect = props => {\r\n  if (props.allowSelectAll) {\r\n    return (\r\n      <ReactSelect\r\n        {...props}\r\n        options={[props.allOption, ...props.options]}\r\n        onChange={(selected, event) => {\r\n          if (selected !== null && selected.length > 0) {\r\n            if (selected[selected.length - 1].value === props.allOption.value) {\r\n              return props.onChange([props.allOption, ...props.options]);\r\n            }\r\n            let result = [];\r\n            if (selected.length === props.options.length) {\r\n              if (selected.includes(props.allOption)) {\r\n                result = selected.filter(\r\n                  option => option.value !== props.allOption.value\r\n                );\r\n              } else if (event.action === \"select-option\") {\r\n                result = [props.allOption, ...props.options];\r\n              }\r\n              return props.onChange(result);\r\n            }\r\n          }\r\n\r\n          return props.onChange(selected);\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return <ReactSelect {...props} />;\r\n};\r\n\r\nMySelect.propTypes = {\r\n  options: PropTypes.array,\r\n  value: PropTypes.any,\r\n  onChange: PropTypes.func,\r\n  allowSelectAll: PropTypes.bool,\r\n  allOption: PropTypes.shape({\r\n    label: PropTypes.string,\r\n    value: PropTypes.string\r\n  })\r\n};\r\n\r\nMySelect.defaultProps = {\r\n  allOption: {\r\n    label: \"Select all\",\r\n    value: \"*\"\r\n  }\r\n};\r\n\r\nexport const Option = props => {\r\n  return (\r\n    <div>\r\n      <components.Option {...props}>\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={props.isSelected}\r\n          onChange={() => null}\r\n        />{\" \"}\r\n        <label>{props.label}</label>\r\n      </components.Option>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst allOption = {\r\n  label: \"Select all\",\r\n  value: \"*\"\r\n};\r\n\r\nexport const ValueContainer = ({ children, ...props }) => {\r\n  const currentValues = props.getValue();\r\n  let toBeRendered = children;\r\n  if (currentValues.some(val => val.value === allOption.value)) {\r\n    toBeRendered = [[children[0][0]], children[1]];\r\n  }\r\n\r\n  return (\r\n    <components.ValueContainer {...props}>\r\n      {toBeRendered}\r\n    </components.ValueContainer>\r\n  );\r\n};\r\n\r\nexport const MultiValue = props => {\r\n  let labelToBeDisplayed = `${props.data.label}, `;\r\n  if (props.data.value === allOption.value) {\r\n    labelToBeDisplayed = \"All Postcodes\";\r\n  }\r\n  return (\r\n    <components.MultiValue {...props}>\r\n      <span>{labelToBeDisplayed}</span>\r\n    </components.MultiValue>\r\n  );\r\n};\r\n\r\nexport const animatedComponents = makeAnimated();\r\n\r\nexport default MySelect;\r\n","import React from \"react\";\r\nimport Field from \"./Field\";\r\nimport MySelect, {\r\n  Option,\r\n  MultiValue,\r\n  ValueContainer,\r\n  animatedComponents\r\n} from \"./MySelect.js\";\r\n\r\nfunction Composer(props) {\r\n  const {\r\n    postcodes,\r\n    subject,\r\n    message,\r\n    allPostcodes,\r\n    readOnly,\r\n    onChange,\r\n    dirty,\r\n    validation,\r\n    onPostcodeChange,\r\n    touched\r\n  } = props;\r\n\r\n  const optionsData = allPostcodes.map(postcode => ({\r\n    value: postcode,\r\n    label: postcode\r\n  }));\r\n\r\n  return (\r\n    <div className=\"mesblkml-composer\">\r\n      <Field isValid={dirty && touched.postcodes ? validation.postcodes : true}>\r\n        <MySelect\r\n          className=\"mes-multiseclct\"\r\n          options={optionsData}\r\n          isMulti\r\n          closeMenuOnSelect={false}\r\n          hideSelectedOptions={false}\r\n          components={{\r\n            Option,\r\n            MultiValue,\r\n            ValueContainer,\r\n            animatedComponents\r\n          }}\r\n          onChange={onPostcodeChange}\r\n          allowSelectAll={true}\r\n          value={postcodes}\r\n          placeholder=\"Select Postcode(s)\"\r\n        />\r\n      </Field>\r\n      <Field isValid={dirty && touched.subject ? validation.subject : true}>\r\n        <input\r\n          type=\"text\"\r\n          value={subject}\r\n          onChange={onChange}\r\n          name=\"subject\"\r\n          readOnly={readOnly}\r\n          placeholder=\"Write Subject\"\r\n        />\r\n      </Field>\r\n      <Field isValid={dirty && touched.message ? validation.message : true}>\r\n        <textarea\r\n          value={message}\r\n          onChange={onChange}\r\n          name=\"message\"\r\n          readOnly={readOnly}\r\n          rows=\"10\"\r\n          placeholder=\"Write Message\"\r\n        />\r\n      </Field>\r\n      <Field isValid={true}>\r\n        *use [name] to insert customer billing name in the message e.g. Hi\r\n        [name], ....\r\n      </Field>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Composer;\r\n","import React from \"react\";\r\n\r\nimport Highlight from \"./Highlight\";\r\nimport JsonRequest from \"./JsonRequest\";\r\nimport { resources, plural } from \"../util\";\r\n\r\nclass Previewer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  renderPreview() {\r\n    const {\r\n      email: { postcodes, subject, message },\r\n      progress: { sentCount, customerCount },\r\n      quota: { limit, used },\r\n      isNewEmail\r\n    } = this.props;\r\n    const remainingCustomers = customerCount - sentCount;\r\n    const remainingQuota = limit - used;\r\n    const feedback =\r\n      remainingCustomers > remainingQuota\r\n        ? `There is not enough quota remaining to send ${remainingCustomers} emails. Only ${remainingQuota} emails can be sent.`\r\n        : \"\";\r\n    return (\r\n      <div>\r\n        <div className=\"mes-row\">\r\n          <div className=\"mes-row__heading\">\r\n            {plural(postcodes.length > 1, \"Postcodes\", \"Postcode\")}\r\n          </div>\r\n          <div className=\"mes-row__detail\">\r\n            <Highlight\r\n              v={postcodes.filter(o => \"*\" !== o.value).map(o => o.value)}\r\n            />{\" \"}\r\n            ({postcodes.length > 1 ? \"all \" : \"\"}having{\" \"}\r\n            {postcodes.length > 1 ? \"total \" : \"\"}\r\n            <Highlight v={customerCount} />{\" \"}\r\n            {plural(customerCount > 1, \"customers\", \"customer\")})\r\n          </div>\r\n        </div>\r\n        <div className=\"mes-row\">\r\n          <div className=\"mes-row__heading\">Subject</div>\r\n          <div className=\"mes-row__detail\">{subject}</div>\r\n        </div>\r\n        <div className=\"mes-row\">\r\n          <div className=\"mes-row__heading\">Message</div>\r\n          <div\r\n            className=\"mes-row__detail\"\r\n            style={{ border: \"1px dotted #000\" }}\r\n            dangerouslySetInnerHTML={{\r\n              __html: (() => message.replace(/(?:\\r\\n|\\r|\\n)/g, \"<br/>\"))()\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"mes-row\">\r\n          <div className=\"mes-row__heading\">Total customers to serve</div>\r\n          <div className=\"mes-row__detail\">\r\n            {customerCount}{\" \"}\r\n            <small>(emails will need to be sent for selected postcodes)</small>\r\n          </div>\r\n        </div>\r\n        {!isNewEmail && (\r\n          <div className=\"mes-row\">\r\n            <div className=\"mes-row__heading\">Customers already served</div>\r\n            <div className=\"mes-row__detail\">\r\n              {sentCount} <small>(emails have already been sent)</small>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {!isNewEmail && (\r\n          <div className=\"mes-row\">\r\n            <div className=\"mes-row__heading\">\r\n              Customers remaining to be served\r\n            </div>\r\n            <div className=\"mes-row__detail\">\r\n              {remainingCustomers}{\" \"}\r\n              <small>(emails are remaining to be sent)</small>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div className=\"mes-row\">\r\n          <div className=\"mes-row__heading\">Qutoa</div>\r\n          <div className=\"mes-row__detail\">{limit}</div>\r\n        </div>\r\n        <div className=\"mes-row\">\r\n          <div className=\"mes-row__heading\">Remaining Qutoa</div>\r\n          <div className=\"mes-row__detail\">{remainingQuota}</div>\r\n        </div>\r\n\r\n        <div className=\"mes-row\" style={{ marginTop: \"2em\" }}>\r\n          <small>\r\n            <strong>Processing Info:</strong>\r\n            <br />\r\n            - Emails will be sent until all emails are sent, qutoa rans out or\r\n            some unexpected error occurs.\r\n            <br />\r\n            - If quota is renewed during the processing, it will be consumed.\r\n            <br />\r\n            - If not all emails are sent, data will be saved to resume the\r\n            processing later to send remaining emails.\r\n            <br />\r\n          </small>\r\n        </div>\r\n        {feedback && (\r\n          <div\r\n            className=\"mes-row\"\r\n            style={{\r\n              textAlign: \"center\",\r\n              fontSize: \"1.2em\",\r\n              marginTop: \"2em\",\r\n              color: \"#cc3300\",\r\n              fontWeight: \"bold\"\r\n            }}\r\n          >\r\n            {feedback}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderGenerateRequest() {\r\n    return (\r\n      <JsonRequest\r\n        resource={resources.error.code500 && resources.previewer.pass}\r\n        progressMessage=\"Generating preview\"\r\n        onSuccess={obj => {\r\n          console.log(\"preview::\", obj);\r\n          this.props.onPreviewGenerate(obj);\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  render() {\r\n    const element = this.props.email.dirty ? (\r\n      <div className=\"mes-hvcenter\">{this.renderGenerateRequest()}</div>\r\n    ) : (\r\n      this.renderPreview()\r\n    );\r\n    return <div>{element}</div>;\r\n  }\r\n}\r\nexport default Previewer;\r\n","import React from \"react\";\r\n\r\nimport JsonRequest from \"./JsonRequest\";\r\nimport { resources } from \"../util\";\r\n\r\nclass Progress extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      fetching: true\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  renderFetchRequest() {\r\n    return (\r\n      <JsonRequest\r\n        data={{ clientId: this.props.clientId }}\r\n        resource={resources.error.code500 && resources.progress.pass}\r\n        progressMessage=\"Fetching progress\"\r\n        onSuccess={obj => {\r\n          console.log(this.props);\r\n          this.mounted &&\r\n            this.props.onSentCountChange(this.props.sentCount + 1);\r\n        }}\r\n        onComplete={() => {\r\n          this.mounted && this.setState({ fetching: false });\r\n          if (!this.props.stop) {\r\n            setTimeout(\r\n              () => this.mounted && this.setState({ fetching: true }),\r\n              this.props.delay || 2000\r\n            );\r\n          }\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { stop, sentCount, customerCount } = this.props;\r\n    return (\r\n      <div className=\"mesblkml-progress\">\r\n        <div className=\"mesblkml-progress__stats\">\r\n          <span>{sentCount}</span> / <span>{customerCount}</span>{\" \"}\r\n          <span>emails sent</span>\r\n        </div>\r\n        <div className=\"mesblkml-progress__status\">\r\n          {!stop && this.state.fetching ? (\r\n            this.renderFetchRequest()\r\n          ) : (\r\n            <div>&nbsp;</div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Progress;\r\n","import React from \"react\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\nimport JsonRequest from \"./JsonRequest\";\r\nimport Progress from \"./Progress\";\r\n\r\nimport { resources } from \"../util\";\r\n\r\nclass Sender extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      sending: true,\r\n      fetchProgress: true,\r\n      message: \"\"\r\n    };\r\n  }\r\n\r\n  renderSendRequest() {\r\n    return (\r\n      <JsonRequest\r\n        data={{ clientId: this.props.clientId, \"mocky-delay\": \"6000ms\" }}\r\n        resource={resources.error.code500 && resources.sender.pass}\r\n        progressMessage=\"Processing\"\r\n        onSuccess={obj =>\r\n          this.setState({\r\n            sending: false,\r\n            message: obj.msg\r\n          })\r\n        }\r\n        onError={err => this.setState({ fetchProgress: false })}\r\n        onRetry={() => this.setState({ fetchProgress: true })}\r\n      />\r\n    );\r\n  }\r\n  render() {\r\n    const { sending, fetchProgress, message } = this.state;\r\n    const { sentCount, customerCount, onRestart } = this.props;\r\n    const element = sending ? (\r\n      <div>\r\n        <div className=\"mesblkml-sender__status\">\r\n          {this.renderSendRequest()}\r\n        </div>\r\n        <Progress {...this.props} stop={!fetchProgress} />\r\n        {!fetchProgress && (\r\n          <div className=\"mesblkml-retart\">\r\n            <Link\r\n              to=\"/\"\r\n              onClick={() => {\r\n                onRestart();\r\n              }}\r\n            >\r\n              Home\r\n            </Link>\r\n          </div>\r\n        )}\r\n      </div>\r\n    ) : (\r\n      <div>\r\n        <Progress\r\n          stop={true}\r\n          sentCount={sentCount}\r\n          customerCount={customerCount}\r\n        />\r\n        <div className=\"mesblkml-result\">\r\n          <div>Completed</div>\r\n          <div>{message}</div>\r\n        </div>\r\n        <div className=\"mesblkml-retart\">\r\n          <Link\r\n            to=\"/\"\r\n            onClick={() => {\r\n              onRestart();\r\n            }}\r\n          >\r\n            Home\r\n          </Link>\r\n        </div>\r\n        <div />\r\n      </div>\r\n    );\r\n    return <div className=\"mesblkml-sender\">{element}</div>;\r\n  }\r\n}\r\nexport default Sender;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Navigation(props) {\r\n  const { prevPath, prevLabel, onPrev, nextPath, nextLabel, onNext } = props;\r\n  const noop = () => {};\r\n  return (\r\n    <div className=\"mesblkml-navigation\">\r\n      {prevPath ? (\r\n        <Link to={prevPath} onClick={onPrev ? onPrev : noop}>\r\n          {prevLabel ? prevLabel : \"Previous\"}\r\n        </Link>\r\n      ) : null}\r\n      {nextPath ? (\r\n        <Link to={nextPath} onClick={onNext ? onNext : noop}>\r\n          {nextLabel ? nextLabel : \"Next\"}\r\n        </Link>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Navigation;\r\n","import React from \"react\";\r\nimport { MemoryRouter as Router } from \"react-router\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\n\r\nimport HomePage from \"./HomePage\";\r\nimport Composer from \"./Composer\";\r\nimport Previewer from \"./Previewer\";\r\nimport Sender from \"./Sender\";\r\nimport Navigation from \"./Navigation\";\r\nimport JsonRequest from \"./JsonRequest\";\r\nimport Highlight from \"./Highlight\";\r\n\r\nimport { resources, plural } from \"../util\";\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      initCount: 0,\r\n      isNewEmail: true,\r\n      email: {\r\n        postcodes: null,\r\n        subject: \"\",\r\n        message: \"\",\r\n        dirty: false,\r\n        touched: {}\r\n      },\r\n      progress: {\r\n        sentCount: 0,\r\n        customerCount: 0,\r\n        clientId: \"\"\r\n      },\r\n      quota: {\r\n        limit: 0,\r\n        used: 0,\r\n        nextRenewal: \"\"\r\n      }\r\n    };\r\n  }\r\n\r\n  buildEmailObj(obj) {\r\n    return {\r\n      postcodes: (obj && obj.postcodes) || null,\r\n      subject: (obj && obj.subject) || \"\",\r\n      message: (obj && obj.message) || \"\",\r\n      dirty: !!obj,\r\n      touched: {}\r\n    };\r\n  }\r\n\r\n  buildProgressObj(obj) {\r\n    return {\r\n      sentCount: (obj && obj.sentCount) || 0,\r\n      customerCount: (obj && obj.customerCount) || 0,\r\n      clientId: (obj && obj.clientId) || \"\"\r\n    };\r\n  }\r\n\r\n  handleSavedEmailDelete = () => {\r\n    this.setState({\r\n      isNewEmail: true,\r\n      email: this.buildEmailObj(null),\r\n      progress: this.buildProgressObj(null)\r\n    });\r\n  };\r\n\r\n  handleEmailDraftChange = e => {\r\n    const { name, value } = e.target;\r\n    this.setState({\r\n      email: {\r\n        ...this.state.email,\r\n        [name]: value,\r\n        dirty: true,\r\n        touched: { ...this.state.email.touched, [name]: 1 }\r\n      }\r\n    });\r\n  };\r\n\r\n  handlePostcodeChange = selectedOptionsData => {\r\n    this.setState({\r\n      email: {\r\n        ...this.state.email,\r\n        postcodes: selectedOptionsData,\r\n        dirty: true,\r\n        touched: { ...this.state.email.touched, postcodes: 1 }\r\n      }\r\n    });\r\n  };\r\n\r\n  handleSentCountChange = newCount => {\r\n    this.setState({\r\n      progress: { ...this.state.progress, sentCount: newCount }\r\n    });\r\n  };\r\n\r\n  handlerPreviewGenerate = data => {\r\n    const obj = {\r\n      email: { ...this.state.email, dirty: false }\r\n    };\r\n    if (this.state.isNewEmail) {\r\n      obj[\"progress\"] = {\r\n        ...this.state.progress,\r\n        customerCount: data.customerCount\r\n      };\r\n    }\r\n    this.setState(obj);\r\n  };\r\n\r\n  handleRestart = () =>\r\n    this.setState(prevState => ({ initCount: prevState.initCount + 1 }));\r\n\r\n  renderInitRequest() {\r\n    return (\r\n      <JsonRequest\r\n        resource={resources.error.custom && resources.app.hasSavedEmail}\r\n        progressMessage={\r\n          !this.state.initCount ? \"Initializing App\" : \"Fetching status\"\r\n        }\r\n        onSuccess={obj => {\r\n          console.log(\"app::\", obj);\r\n          this.setState(prevState => ({\r\n            initCount: prevState.initCount + 1,\r\n            isNewEmail: !obj.savedEmail,\r\n            email: this.buildEmailObj(obj.savedEmail),\r\n            progress: this.buildProgressObj(obj.savedEmail),\r\n            quota: obj.quota\r\n          }));\r\n        }}\r\n        onComplete={() => \"app oncomplete called\"}\r\n      />\r\n    );\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    console.log(\"app: unmounting\");\r\n  }\r\n\r\n  render() {\r\n    console.log(\"app state\", this.state);\r\n    const { initCount, isNewEmail, email, progress, quota } = this.state;\r\n    const emailValidation = Object.keys(email)\r\n      .filter(p => \"dirty\" !== p && \"touched\" !== p)\r\n      .reduce(\r\n        (o, p) => ({\r\n          ...o,\r\n          [p]:\r\n            email[p] &&\r\n            (Array.isArray(email[p])\r\n              ? !!email[p].length\r\n              : !!String(email[p]).trim())\r\n        }),\r\n        {}\r\n      );\r\n    const isInvalidEmail = Object.keys(emailValidation).filter(\r\n      p => !emailValidation[p]\r\n    ).length;\r\n    console.log(emailValidation, isInvalidEmail);\r\n    return !(initCount % 2) ? (\r\n      <div className=\"mes-hvcenter\">{this.renderInitRequest()}</div>\r\n    ) : (\r\n      <Router initialEntries={[\"/\", \"/compose\", \"/preview\"]}>\r\n        <Switch>\r\n          <Route\r\n            path=\"/\"\r\n            exact\r\n            render={() => (\r\n              <HomePage\r\n                quota={quota}\r\n                savedEmail={isNewEmail ? null : { ...email, ...progress }}\r\n                onSavedEmailDelete={this.handleSavedEmailDelete}\r\n              />\r\n            )}\r\n          />\r\n          <Route\r\n            path=\"/compose\"\r\n            exact\r\n            render={() => (\r\n              <div id=\"mesblkml-compose\">\r\n                <h2>Compose Email</h2>\r\n                <Composer\r\n                  {...this.state.email}\r\n                  allPostcodes={this.props.allPostcodes}\r\n                  onChange={this.handleEmailDraftChange}\r\n                  validation={emailValidation}\r\n                  onPostcodeChange={this.handlePostcodeChange}\r\n                />\r\n                <Navigation\r\n                  prevPath=\"/\"\r\n                  prevLabel=\"Home\"\r\n                  nextPath=\"/preview\"\r\n                  nextLabel=\"Preview\"\r\n                  onNext={e => {\r\n                    const dirty = this.state.email.dirty;\r\n                    this.setState({\r\n                      email: {\r\n                        ...this.state.email,\r\n                        dirty: true,\r\n                        touched: { postcodes: 1, subject: 1, message: 1 }\r\n                      }\r\n                    });\r\n                    if (isInvalidEmail) e.preventDefault();\r\n                    else {\r\n                      this.setState({\r\n                        email: { ...this.state.email, dirty, touched: {} }\r\n                      });\r\n                    }\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n          />\r\n          <Route\r\n            path=\"/preview\"\r\n            exact\r\n            render={() => (\r\n              <div id=\"mesblkml-preview\">\r\n                <h2>Preview Email</h2>\r\n                <Previewer\r\n                  {...this.state}\r\n                  onPreviewGenerate={this.handlerPreviewGenerate}\r\n                />\r\n                <Navigation\r\n                  prevPath={isNewEmail ? \"/compose\" : \"/\"}\r\n                  prevLabel={isNewEmail ? \"Compose\" : \"Home\"}\r\n                  nextPath=\"/process\"\r\n                  nextLabel=\"Confirm & Send\"\r\n                  onNext={e => {\r\n                    if (!window.confirm(`Are you sure to send this email?`))\r\n                      e.preventDefault();\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n          />\r\n          <Route\r\n            path=\"/process\"\r\n            exact\r\n            render={() => (\r\n              <div id=\"mesblkml-process\">\r\n                <h2>Sending Email</h2>\r\n                <p>\r\n                  <small>having</small> subject{\" \"}\r\n                  <Highlight v={this.state.email.subject} />\r\n                </p>\r\n                <p>\r\n                  <small>to</small>{\" \"}\r\n                  {plural(\r\n                    this.state.email.postcodes.length > 1,\r\n                    \"Postcodes\",\r\n                    \"Postcode\"\r\n                  )}{\" \"}\r\n                  <Highlight\r\n                    v={this.state.email.postcodes\r\n                      .filter(o => \"*\" !== o.value)\r\n                      .map(o => o.value)}\r\n                  />\r\n                </p>\r\n                <Sender\r\n                  {...progress}\r\n                  onSentCountChange={this.handleSentCountChange}\r\n                  onRestart={this.handleRestart}\r\n                />\r\n              </div>\r\n            )}\r\n          />\r\n        </Switch>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./styles.css\";\n\nimport App from \"./components/App\";\nimport Quota from \"./components/Quota\";\nimport Composer from \"./components/Composer\";\nimport Navigation from \"./components/Navigation\";\nimport Progress from \"./components/Progress\";\nimport Sender from \"./components/Sender\";\nimport Field from \"./components/Field\";\nimport MySelect, {\n  Option,\n  MultiValue,\n  ValueContainer,\n  animatedComponents\n} from \"./components/MySelect.js\";\nimport Highlight from \"./components/Highlight\";\nconst colourOptions = [\n  { value: \"ocean1\", label: \"Ocean\", color: \"#00B8D9\" },\n  { value: \"blue\", label: \"Blue\", color: \"#0052CC\" },\n  { value: \"purple\", label: \"Purple\", color: \"#5243AA\" },\n  { value: \"red\", label: \"Red\", color: \"#FF5630\" },\n  { value: \"orange\", label: \"Orange\", color: \"#FF8B00\" },\n  { value: \"yellow\", label: \"Yellow\", color: \"#FFC400\" },\n  { value: \"green\", label: \"Green\", color: \"#36B37E\" },\n  { value: \"forest\", label: \"Forest\", color: \"#00875A\" },\n  { value: \"slate\", label: \"Slate\", color: \"#253858\" },\n  { value: \"silver\", label: \"Silver\", color: \"#666666\" }\n];\nconst delay = ms => cb => setTimeout(cb, ms);\nconst allPostcodes = [\n  \"BT1\",\n  \"BT2\",\n  \"BT3\",\n  \"BT4\",\n  \"BT5\",\n  \"BT6\",\n  \"BT7\",\n  \"BT8\",\n  \"BT9\",\n  \"BT10\",\n  \"BT11\",\n  \"BT12\",\n  \"BT13\",\n  \"BT14\",\n  \"BT15\",\n  \"BT16\",\n  \"BT17\",\n  \"BT18\",\n  \"BT19\",\n  \"BT20\",\n  \"BT21\",\n  \"BT22\",\n  \"BT23\",\n  \"BT24\",\n  \"BT25\",\n  \"BT26\",\n  \"BT27\",\n  \"BT28\",\n  \"BT32\",\n  \"BT36\",\n  \"BT37\",\n  \"BT38\",\n  \"BT61\",\n  \"BT62\",\n  \"BT63\",\n  \"BT64\",\n  \"BT65\",\n  \"BT66\",\n  \"BT67\"\n];\n\nclass Test extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: {\n        postcodes: null,\n        subject: \"abc\",\n        message: \"xad\",\n        dirty: false\n      },\n      stop: false,\n      sentCount: 34,\n      stopCount: 100,\n      selected: null\n    };\n  }\n  handleEmailDraftChange = e => {\n    const { name, value } = e.target;\n    console.log(name, value);\n    this.setState({\n      email: { ...this.state.email, [name]: value }\n    });\n  };\n\n  handlePostcodeChange = selected => {\n    console.log(selected);\n    this.setState({\n      email: { ...this.state.email, postcodes: selected }\n    });\n    return;\n    this.setState({\n      email: { ...this.state.email, postcodes: selected.map(x => x.value) }\n    });\n  };\n\n  render() {\n    const optionsData = allPostcodes.map(postcode => ({\n      value: postcode,\n      label: postcode\n    }));\n    const selectedOptionsData =\n      this.state.email.postcodes &&\n      this.state.email.postcodes.map(postcode => ({\n        value: postcode,\n        label: postcode\n      }));\n    return (\n      <div>\n        <MySelect\n          options={optionsData}\n          isMulti\n          closeMenuOnSelect={false}\n          hideSelectedOptions={false}\n          components={{\n            Option,\n            MultiValue,\n            ValueContainer,\n            animatedComponents\n          }}\n          onChange={this.handlePostcodeChange}\n          allowSelectAll={true}\n          value={this.state.email.postcodes}\n        />\n      </div>\n    );\n    return (\n      <div>\n        <Composer\n          {...this.state.email}\n          onChange={this.handleEmailDraftChange}\n          allPostcodes={allPostcodes}\n          onPostcodeChange={this.handlePostcodeChange}\n        />\n        <button\n          onClick={() =>\n            this.setState(p => {\n              return {\n                email: { ...p.email, dirty: !p.email.dirty }\n              };\n            })\n          }\n        >\n          {!this.state.email.dirty ? \"dirty\" : \"undirty\"}\n        </button>\n      </div>\n    );\n  }\n}\nfunction App2() {\n  return (\n    <App\n      quota={{ limit: 100, used: 55, nextRenewal: \"in\" }}\n      allPostcodes={allPostcodes}\n    />\n  );\n}\n\nconst rootElement = document.getElementById(\"mesblkml\");\nReactDOM.render(<App2 />, rootElement);\n"],"sourceRoot":""}